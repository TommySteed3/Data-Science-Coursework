

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from datetime import datetime
import seaborn as sns
import codecs, json, time, re, tweepy
from vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer
analyzer = SentimentIntensityAnalyzer()
```


```python
with codecs.open('oilprice16to17.json', 'r', 'utf-8') as f:
    tweets = json.load(f, encoding='utf-8')
```


```python
tweet_df = pd.DataFrame(tweets)
print(tweet_df["timestamp"].nunique())
tweet_df.info()
```

    142578
    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 163764 entries, 0 to 163763
    Data columns (total 9 columns):
    fullname     163764 non-null object
    id           163764 non-null object
    likes        163764 non-null object
    replies      163764 non-null object
    retweets     163764 non-null object
    text         163764 non-null object
    timestamp    163764 non-null object
    url          163764 non-null object
    user         163764 non-null object
    dtypes: object(9)
    memory usage: 11.2+ MB



```python
Date = []
Time = []
for time in tweet_df["timestamp"]:
    Date.append(datetime.strptime(time.split("T")[0], "%Y-%m-%d"))
    print('.', end='')

tweet_df["Date"] = Date
tweet_df.head()
```

    ....................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fullname</th>
      <th>id</th>
      <th>likes</th>
      <th>replies</th>
      <th>retweets</th>
      <th>text</th>
      <th>timestamp</th>
      <th>url</th>
      <th>user</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Latest News</td>
      <td>809911081468563457</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>Oil price settles higher on Friday.. Related A...</td>
      <td>2016-12-17T00:00:23</td>
      <td>/latest_ooyuz/status/809911081468563457</td>
      <td>latest_ooyuz</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>1</th>
      <td>*Citizen* Pug</td>
      <td>809911927866527744</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>I love people that think they understand oil p...</td>
      <td>2016-12-17T00:03:45</td>
      <td>/LeepN147/status/809911927866527744</td>
      <td>LeepN147</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Libya News</td>
      <td>809913493235208193</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Oil price settles higher on Friday\nhttp://www...</td>
      <td>2016-12-17T00:09:58</td>
      <td>/LibyanNewsBotEn/status/809913493235208193</td>
      <td>LibyanNewsBotEn</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Раттана Женг Марай®</td>
      <td>809913711540469760</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Oil Rises As Markets Regain Faith In OPEC Deal...</td>
      <td>2016-12-17T00:10:50</td>
      <td>/KittyOwner_Club/status/809913711540469760</td>
      <td>KittyOwner_Club</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Pierre C.</td>
      <td>809913857447698432</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>OPEC+Russia=Oil Price Spike=$$$EXXON+TRUMP= In...</td>
      <td>2016-12-17T00:11:25</td>
      <td>/collegue57/status/809913857447698432</td>
      <td>collegue57</td>
      <td>2016-12-17</td>
    </tr>
  </tbody>
</table>
</div>




```python
tweet_df = tweet_df.loc[:,["user","text","Date"]]
tweet_df.head()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>text</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>latest_ooyuz</td>
      <td>Oil price settles higher on Friday.. Related A...</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>1</th>
      <td>LeepN147</td>
      <td>I love people that think they understand oil p...</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LibyanNewsBotEn</td>
      <td>Oil price settles higher on Friday\nhttp://www...</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>3</th>
      <td>KittyOwner_Club</td>
      <td>Oil Rises As Markets Regain Faith In OPEC Deal...</td>
      <td>2016-12-17</td>
    </tr>
    <tr>
      <th>4</th>
      <td>collegue57</td>
      <td>OPEC+Russia=Oil Price Spike=$$$EXXON+TRUMP= In...</td>
      <td>2016-12-17</td>
    </tr>
  </tbody>
</table>
</div>




```python
compound_list = []

for tweet in tweet_df["text"]:
    compound = analyzer.polarity_scores(tweet)["compound"]
    compound_list.append(compound)

tweet_df["Compound"] = compound_list
tweet_df.head()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>text</th>
      <th>Date</th>
      <th>Compound</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>latest_ooyuz</td>
      <td>Oil price settles higher on Friday.. Related A...</td>
      <td>2016-12-17</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>LeepN147</td>
      <td>I love people that think they understand oil p...</td>
      <td>2016-12-17</td>
      <td>0.7184</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LibyanNewsBotEn</td>
      <td>Oil price settles higher on Friday\nhttp://www...</td>
      <td>2016-12-17</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>KittyOwner_Club</td>
      <td>Oil Rises As Markets Regain Faith In OPEC Deal...</td>
      <td>2016-12-17</td>
      <td>0.4215</td>
    </tr>
    <tr>
      <th>4</th>
      <td>collegue57</td>
      <td>OPEC+Russia=Oil Price Spike=$$$EXXON+TRUMP= In...</td>
      <td>2016-12-17</td>
      <td>0.0000</td>
    </tr>
  </tbody>
</table>
</div>




```python
tweet_df_mean = pd.DataFrame(tweet_df.groupby(["Date"])["Compound"].mean()).reset_index()
tweet_df_mean.head()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Compound</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2016-12-17</td>
      <td>-0.031509</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2016-12-18</td>
      <td>-0.055849</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2016-12-19</td>
      <td>0.029566</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2016-12-20</td>
      <td>-0.079733</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2016-12-21</td>
      <td>0.021886</td>
    </tr>
  </tbody>
</table>
</div>



# PART II: MARKET ANALYSIS


```python
from pandas_datareader import data
import matplotlib.pyplot as plt
import warnings
# warnings.filterwarnings('ignore')
```


```python
# We would like all available data from MM/DD/YYYY until MM/DD/YYYY.
start_date = tweet_df_mean["Date"].min().strftime('%Y-%m-%d')
end_date = tweet_df_mean["Date"].max().strftime('%Y-%m-%d')
print("Start date is: "+start_date)
print("End date is: "+end_date)
```

    Start date is: 2016-12-17
    End date is: 2017-12-15



```python
# Define the instruments to download. We would like to see Apple, Microsoft and the S&P500 index.
tickers = ['TOT', 'CVX', 'BP', 'SNP', 'XOM']

# Define which online source one should use
data_source = 'yahoo'

# User pandas_reader.data.DataReader to load the desired data. As simple as that.
panel_data = data.DataReader(tickers, data_source, start_date, end_date)
```


```python
# Getting just the adjusted closing prices. This will return a Pandas DataFrame
# The index in this DataFrame is the major index of the panel_data.
adj_close = panel_data.ix['Adj Close']

# Getting all weekdays between MM/DD/YYYY and MM/DD/YYYY
all_weekdays = pd.date_range(start=start_date, end=end_date, freq='B')

# How do we align the existing prices in adj_close with our new set of dates?
# All we need to do is reindex close using all_weekdays as the new index
adj_close = adj_close.reindex(all_weekdays)

# Reindexing will insert missing values (NaN) for the dates that were not present
# in the original set. To cope with this, we can fill the missing by replacing them
# with the latest available price for each instrument.
adj_close = adj_close.fillna(method='ffill')

adj_close.head()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BP</th>
      <th>CVX</th>
      <th>SNP</th>
      <th>TOT</th>
      <th>XOM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-12-19</th>
      <td>34.232555</td>
      <td>113.154236</td>
      <td>69.117783</td>
      <td>46.930092</td>
      <td>87.104240</td>
    </tr>
    <tr>
      <th>2016-12-20</th>
      <td>34.195099</td>
      <td>113.442772</td>
      <td>69.089272</td>
      <td>47.026161</td>
      <td>87.113876</td>
    </tr>
    <tr>
      <th>2016-12-21</th>
      <td>34.438545</td>
      <td>113.404305</td>
      <td>69.032249</td>
      <td>47.583363</td>
      <td>86.969368</td>
    </tr>
    <tr>
      <th>2016-12-22</th>
      <td>34.560272</td>
      <td>114.231430</td>
      <td>68.528580</td>
      <td>48.092537</td>
      <td>87.537743</td>
    </tr>
    <tr>
      <th>2016-12-23</th>
      <td>34.663269</td>
      <td>113.894806</td>
      <td>67.340660</td>
      <td>48.236637</td>
      <td>87.383606</td>
    </tr>
  </tbody>
</table>
</div>




```python
adj_close["TOT Returns"] = ""
adj_close["CVX Returns"] = ""
adj_close["BP Returns"] = ""
adj_close["SNP Returns"] = ""
adj_close["XOM Returns"] = ""
adj_close.head()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BP</th>
      <th>CVX</th>
      <th>SNP</th>
      <th>TOT</th>
      <th>XOM</th>
      <th>TOT Returns</th>
      <th>CVX Returns</th>
      <th>BP Returns</th>
      <th>SNP Returns</th>
      <th>XOM Returns</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-12-19</th>
      <td>34.232555</td>
      <td>113.154236</td>
      <td>69.117783</td>
      <td>46.930092</td>
      <td>87.104240</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2016-12-20</th>
      <td>34.195099</td>
      <td>113.442772</td>
      <td>69.089272</td>
      <td>47.026161</td>
      <td>87.113876</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2016-12-21</th>
      <td>34.438545</td>
      <td>113.404305</td>
      <td>69.032249</td>
      <td>47.583363</td>
      <td>86.969368</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2016-12-22</th>
      <td>34.560272</td>
      <td>114.231430</td>
      <td>68.528580</td>
      <td>48.092537</td>
      <td>87.537743</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2016-12-23</th>
      <td>34.663269</td>
      <td>113.894806</td>
      <td>67.340660</td>
      <td>48.236637</td>
      <td>87.383606</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>




```python
adj_close.index.name = "Date"
adj_close = adj_close.reset_index()
adj_close.head()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>BP</th>
      <th>CVX</th>
      <th>SNP</th>
      <th>TOT</th>
      <th>XOM</th>
      <th>TOT Returns</th>
      <th>CVX Returns</th>
      <th>BP Returns</th>
      <th>SNP Returns</th>
      <th>XOM Returns</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2016-12-19</td>
      <td>34.232555</td>
      <td>113.154236</td>
      <td>69.117783</td>
      <td>46.930092</td>
      <td>87.104240</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>2016-12-20</td>
      <td>34.195099</td>
      <td>113.442772</td>
      <td>69.089272</td>
      <td>47.026161</td>
      <td>87.113876</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>2016-12-21</td>
      <td>34.438545</td>
      <td>113.404305</td>
      <td>69.032249</td>
      <td>47.583363</td>
      <td>86.969368</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>3</th>
      <td>2016-12-22</td>
      <td>34.560272</td>
      <td>114.231430</td>
      <td>68.528580</td>
      <td>48.092537</td>
      <td>87.537743</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>2016-12-23</td>
      <td>34.663269</td>
      <td>113.894806</td>
      <td>67.340660</td>
      <td>48.236637</td>
      <td>87.383606</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>




```python
# Set initial return value as this is the start
adj_close.set_value(0, "TOT Returns", 0)
adj_close.set_value(0, "CVX Returns", 0)
adj_close.set_value(0, "BP Returns", 0)
adj_close.set_value(0, "SNP Returns", 0)
adj_close.set_value(0, "XOM Returns", 0)
i = 0

# Scaling Factor for comparison with Twitter
m = 10 

# Iterate through each row and calculate the daily returns
for index, row in adj_close.iterrows():
    if index==0:
        print("1st row skipped")
    else:
        try:
            # Calculate the daily returns
            dji_returns = ((row["TOT"]/adj_close["TOT"][i])-1)*m
            gspc_returns = ((row["CVX"]/adj_close["CVX"][i])-1)*m
            ixic_returns = ((row["BP"]/adj_close["BP"][i])-1)*m
            ixic_returns = ((row["SNP"]/adj_close["SNP"][i])-1)*m
            ixic_returns = ((row["XOM"]/adj_close["XOM"][i])-1)*m
            
            # Set return values to appropriate index
            adj_close.set_value(index, "TOT Returns", dji_returns)
            adj_close.set_value(index, "CVX Returns", gspc_returns)
            adj_close.set_value(index, "BP Returns", ixic_returns)
            adj_close.set_value(index, "SNP Returns", ixic_returns)
            adj_close.set_value(index, "XOM Returns", ixic_returns)
            i += 1
            print(".", end="")
        except:
            print("This doesn't work. Please try again")

adj_close_returns = adj_close.set_index("Date")
adj_close_returns.head()
```

    1st row skipped
    ...................................................................................................................................................................................................................................................................




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BP</th>
      <th>CVX</th>
      <th>SNP</th>
      <th>TOT</th>
      <th>XOM</th>
      <th>TOT Returns</th>
      <th>CVX Returns</th>
      <th>BP Returns</th>
      <th>SNP Returns</th>
      <th>XOM Returns</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-12-19</th>
      <td>34.232555</td>
      <td>113.154236</td>
      <td>69.117783</td>
      <td>46.930092</td>
      <td>87.104240</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2016-12-20</th>
      <td>34.195099</td>
      <td>113.442772</td>
      <td>69.089272</td>
      <td>47.026161</td>
      <td>87.113876</td>
      <td>0.0204707</td>
      <td>0.0254994</td>
      <td>0.00110626</td>
      <td>0.00110626</td>
      <td>0.00110626</td>
    </tr>
    <tr>
      <th>2016-12-21</th>
      <td>34.438545</td>
      <td>113.404305</td>
      <td>69.032249</td>
      <td>47.583363</td>
      <td>86.969368</td>
      <td>0.118488</td>
      <td>-0.00339087</td>
      <td>-0.0165884</td>
      <td>-0.0165884</td>
      <td>-0.0165884</td>
    </tr>
    <tr>
      <th>2016-12-22</th>
      <td>34.560272</td>
      <td>114.231430</td>
      <td>68.528580</td>
      <td>48.092537</td>
      <td>87.537743</td>
      <td>0.107007</td>
      <td>0.0729359</td>
      <td>0.0653535</td>
      <td>0.0653535</td>
      <td>0.0653535</td>
    </tr>
    <tr>
      <th>2016-12-23</th>
      <td>34.663269</td>
      <td>113.894806</td>
      <td>67.340660</td>
      <td>48.236637</td>
      <td>87.383606</td>
      <td>0.0299631</td>
      <td>-0.0294686</td>
      <td>-0.0176081</td>
      <td>-0.0176081</td>
      <td>-0.0176081</td>
    </tr>
  </tbody>
</table>
</div>




```python
adj_close.describe()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BP</th>
      <th>CVX</th>
      <th>SNP</th>
      <th>TOT</th>
      <th>XOM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>260.000000</td>
      <td>260.000000</td>
      <td>260.000000</td>
      <td>260.000000</td>
      <td>260.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>35.138589</td>
      <td>108.998935</td>
      <td>74.633856</td>
      <td>50.977859</td>
      <td>80.562815</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.479999</td>
      <td>5.646664</td>
      <td>2.678186</td>
      <td>2.664736</td>
      <td>2.376819</td>
    </tr>
    <tr>
      <th>min</th>
      <td>31.740181</td>
      <td>101.068893</td>
      <td>67.340660</td>
      <td>46.930092</td>
      <td>75.402168</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>33.398088</td>
      <td>104.175798</td>
      <td>73.075786</td>
      <td>48.886717</td>
      <td>79.192383</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>34.417358</td>
      <td>107.613487</td>
      <td>74.868652</td>
      <td>50.038072</td>
      <td>80.222771</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>36.115656</td>
      <td>113.894806</td>
      <td>76.501877</td>
      <td>53.091603</td>
      <td>81.845444</td>
    </tr>
    <tr>
      <th>max</th>
      <td>40.878841</td>
      <td>120.839996</td>
      <td>80.303207</td>
      <td>56.959999</td>
      <td>87.557007</td>
    </tr>
  </tbody>
</table>
</div>



#### PLOT


```python
width = 15
height = 10

# Get the time series. This now returns a Pandas Series object indexed by date.
TOT = adj_close_returns.ix[:, 'TOT Returns']
CVX = adj_close_returns.ix[:, 'CVX Returns']
BP = adj_close_returns.ix[:, 'BP Returns']
SNP = adj_close_returns.ix[:, 'SNP Returns']
XOM = adj_close_returns.ix[:, 'XOM Returns']

# Plot everything by leveraging the very powerful matplotlib package
fig = plt.figure(figsize=(width,height))
ax = fig.add_subplot(1,1,1)
ax.plot(TOT.index, TOT, label='TOT Returns', color = "red")
ax.plot(CVX.index, CVX, label='CVX Returns', color = "orange")
ax.plot(BP.index, BP, label='BP Returns', color = "yellow")
ax.plot(SNP.index, SNP, label='SNP Returns', color = "green")
ax.plot(XOM.index, XOM, label='XOM Returns', color = "purple")
ax.plot(tweet_df_mean["Date"], tweet_df_mean['Compound'], label='Tweet', color = "blue")

ax.set_xlabel('Date')
ax.set_ylabel('Normalized Stock Returns & Sentiment')
ax.set_title('Stock Market Returns & Twitter Sentiments')
ax.legend()

plt.savefig('oilprice-12_2016to12_2017')
plt.show()
```


![png](output_17_0.png)



```python
adj_close_returns.head()
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BP</th>
      <th>CVX</th>
      <th>SNP</th>
      <th>TOT</th>
      <th>XOM</th>
      <th>TOT Returns</th>
      <th>CVX Returns</th>
      <th>BP Returns</th>
      <th>SNP Returns</th>
      <th>XOM Returns</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-12-19</th>
      <td>34.232555</td>
      <td>113.154236</td>
      <td>69.117783</td>
      <td>46.930092</td>
      <td>87.104240</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2016-12-20</th>
      <td>34.195099</td>
      <td>113.442772</td>
      <td>69.089272</td>
      <td>47.026161</td>
      <td>87.113876</td>
      <td>0.0204707</td>
      <td>0.0254994</td>
      <td>0.00110626</td>
      <td>0.00110626</td>
      <td>0.00110626</td>
    </tr>
    <tr>
      <th>2016-12-21</th>
      <td>34.438545</td>
      <td>113.404305</td>
      <td>69.032249</td>
      <td>47.583363</td>
      <td>86.969368</td>
      <td>0.118488</td>
      <td>-0.00339087</td>
      <td>-0.0165884</td>
      <td>-0.0165884</td>
      <td>-0.0165884</td>
    </tr>
    <tr>
      <th>2016-12-22</th>
      <td>34.560272</td>
      <td>114.231430</td>
      <td>68.528580</td>
      <td>48.092537</td>
      <td>87.537743</td>
      <td>0.107007</td>
      <td>0.0729359</td>
      <td>0.0653535</td>
      <td>0.0653535</td>
      <td>0.0653535</td>
    </tr>
    <tr>
      <th>2016-12-23</th>
      <td>34.663269</td>
      <td>113.894806</td>
      <td>67.340660</td>
      <td>48.236637</td>
      <td>87.383606</td>
      <td>0.0299631</td>
      <td>-0.0294686</td>
      <td>-0.0176081</td>
      <td>-0.0176081</td>
      <td>-0.0176081</td>
    </tr>
  </tbody>
</table>
</div>




```python
# narrowing the window of view
new_start_date = '2017-09-04'
tweet_df_mean2 = tweet_df_mean[tweet_df_mean["Date"] > new_start_date]
adj_close_returns2 = adj_close_returns.ix[new_start_date:end_date]

width = 15
height = 10

# Get the time series. This now returns a Pandas Series object indexed by date.
TOT = adj_close_returns2.ix[:, 'TOT Returns']
CVX = adj_close_returns2.ix[:, 'CVX Returns']
BP = adj_close_returns2.ix[:, 'BP Returns']
SNP = adj_close_returns2.ix[:, 'SNP Returns']
XOM = adj_close_returns2.ix[:, 'XOM Returns']

# Plot everything by leveraging the very powerful matplotlib package
fig = plt.figure(figsize=(width,height))
ax = fig.add_subplot(1,1,1)
ax.plot(TOT.index, TOT, label='TOT Returns', color = "red")
ax.plot(CVX.index, CVX, label='CVX Returns', color = "orange")
ax.plot(BP.index, BP, label='BP Returns', color = "yellow")
ax.plot(SNP.index, SNP, label='SNP Returns', color = "green")
ax.plot(XOM.index, XOM, label='XOM Returns', color = "purple")

ax.plot(tweet_df_mean2["Date"], tweet_df_mean2['Compound'], label='Tweet', color = "blue")

ax.set_xlabel('Date')
ax.set_ylabel('Normalized Stock Returns & Sentiment')
ax.set_title('Stock Market Returns & Twitter Sentiments')
ax.legend()

plt.savefig('oilprice-9_2017to12_2017')
plt.show()
```


![png](output_19_0.png)



```python
# narrowing the window of view
new_start_date = '2017-11-15'
tweet_df_mean3 = tweet_df_mean2[tweet_df_mean2["Date"] > new_start_date]
adj_close_returns3 = adj_close_returns2.ix[new_start_date:end_date]

width = 15
height = 10

# Get the time series. This now returns a Pandas Series object indexed by date.
TOT = adj_close_returns3.ix[:, 'TOT Returns']
CVX = adj_close_returns3.ix[:, 'CVX Returns']
BP = adj_close_returns3.ix[:, 'BP Returns']
SNP = adj_close_returns3.ix[:, 'SNP Returns']
XOM = adj_close_returns3.ix[:, 'XOM Returns']

# Plot everything by leveraging the very powerful matplotlib package
fig = plt.figure(figsize=(width,height))
ax = fig.add_subplot(1,1,1)
ax.plot(TOT.index, TOT, label='TOT Returns', color = "red")
ax.plot(CVX.index, CVX, label='CVX Returns', color = "orange")
ax.plot(BP.index, BP, label='BP Returns', color = "yellow")
ax.plot(SNP.index, SNP, label='SNP Returns', color = "green")
ax.plot(XOM.index, XOM, label='XOM Returns', color = "purple")

ax.plot(tweet_df_mean3["Date"], tweet_df_mean3['Compound'], label='Tweet', color = "blue")

ax.set_xlabel('Date')
ax.set_ylabel('Normalized Stock Returns & Sentiment')
ax.set_title('Stock Market Returns & Twitter Sentiments')
ax.legend()

plt.savefig('oilprice-10_2017to12_2017')
plt.show()
```


![png](output_20_0.png)

